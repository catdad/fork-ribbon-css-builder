<!doctype html>
<html>
<head>
	<title>CSS Ribbon Builder</title>
	
	<!--link rel="shortcut icon" href="misc/ribbon.png" /--> 
	<link rel="icon" type="image/png" href="misc/ribbon.png" />
	
	<style>
		html, body{
			margin: 0; padding: 0;
			background-color: #e5e5e5;
			color: #898989;
			text-align: center;
			font-family: sans-serif;
			font-size: .9em;
		}
		.heading{
			font-size: 2em;
			margin: 15px;
		}
		
		.flat{
			box-shadow: 0 0 0 3px #F6C304 !important;
			text-shadow: none !important;
		}
		.dark{
			color: #555 !important;
			border-color: #555 !important;
		}
		
		.section{
			margin: 15px 0;
		}
		.section .title{
			font-size: 1.3em;
			margin: 5px 0 2px;
		}
		
		#locLeft, #locRight{
			display: inline-block;
			width: 200px;
		}
		#locLeft{ text-align: right; }
		#locRight{ text-align: left; }
		
		input[type="text"] { padding: 5px; }
		textarea, input[name="link"]{ width: 550px; padding: 5px; }
		textarea{ height: 150px; }
		
		#picker { width: 200px; height: 200px; display: inline-block; }
		#slider { width: 20px; height: 200px; display: inline-block; }
	
		
		#note{
			display: block;
			padding: 5px;
			text-align: left;
			font-weight: bold;
			background-color: #F8EEA5;
			border-bottom: 1px solid #F6C304;
		}
		#note div{ width: 66em; margin: 0 auto;}
	</style>
</head>
<body>
	<a id="fork" class="" href="#">Fork me on GitHub</a>
	
	<div id="note">
		<div>
		This project (and documentation) is still a work in progress. 
		If you have any suggestions, please submit them on the GitHub page. 
		Once the project features have been finalized, this message will be remoted.
		</div>
	</div>
	
	<div class="heading">Pure CSS generator for the "Fork me on GitHub" ribbon</div>
	
	<div class="section">
		<div class="title">Ribbon color</div>
		<div id="picker"></div>
		<div id="slider"></div>
		<br/>
		<input type="text" name="hex" placeholder="color" />
	</div>
	
	<div class="section">
		<div class="title">Position on the page</div>
		<div id="locLeft">
			<div>Top Left <input type="radio" name="position" value="topLeft" /></div>
			<div>Bottom Left <input type="radio" name="position" value="bottomLeft" /></div>
		</div>
		<div id="locRight">
			<div><input type="radio" name="position" value="topRight" checked /> Top Right</div>
			<div><input type="radio" name="position" value="bottomRight" /> Bottom Right</div>
		</div>
	</div>
	
	<div class="section">
		<div class="title">Font color</div>
		<input name="text" type="radio" value="#fff" checked /> White
		<input name="text" type="radio" value="#e5e5e5" /> Gray
		<input name="text" type="radio" value="#555" /> Black
		<input name="flat" type="checkbox" /> Flat
	</div>
	
	<div class="section"><input name="link" placeholder="Link URL" /></div>
	
	<div class="section"><textarea id="text"></textarea></div>
	
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
	<script type="text/javascript" src="misc/colorpicker.min.js"></script>
	<script type="text/javascript" src="misc/analytics.js"></script>
	<script>
		function O(id){ return document.getElementById(id) }
		
		//default config
		var vars = {
			position: "topRight",
			color: "#F6C304",
			text: "#fff",
			link: "#",
			flat: false
		}
		
		//generates ribbon text
		function getText(style){
			return "<a href='" + vars.link + "' style='" + style + "'>Fork me on GitHub</a>";
		}
		
		//generates position css
		var position = {
			topLeft: function(){
				return 	"top:50px;" +
						"left:-50px;" +
						"-ms-transform:rotate(315deg);" +
						"-moz-transform:rotate(315deg);" +
						"-webkit-transform:rotate(315deg);" +
						"transform: rotate(315deg);";
			},
			topRight: function(){
				return 	"top:50px;" +
						"right:-50px;" +		
						"-ms-transform:rotate(45deg);" +
						"-moz-transform:rotate(45deg);" +
						"-webkit-transform:rotate(45deg);" + // translate3d( 0, 0, 0);" +
						"transform: rotate(45deg);";
			},
			bottomLeft: function(){
				return 	"bottom:50px;" +
						"left:-50px;" +
						"-ms-transform:rotate(45deg);" +
						"-moz-transform:rotate(45deg);" +
						"-webkit-transform:rotate(45deg);" +
						"transform: rotate(45deg);";
			},
			bottomRight: function(){
				return 	"bottom:50px;" +
						"right:-50px;" +
						"-ms-transform:rotate(315deg);" +
						"-moz-transform:rotate(315deg);" +
						"-webkit-transform:rotate(315deg);" +
						"transform: rotate(315deg);";
			}
		}
		
		//generates ribbon css
		var ribbon = function(color){
			var str = "position:fixed;" +
					"padding:5px 45px;" +
					"width:123px;" +
					"background-color:" + color + ";" +
					"color:" + vars.text + ";" +
					"font-size:13px;" +
					"font-family:sans-serif;" +
					"text-decoration:none; " +
					"font-weight:bold;";
					
			str += "-webkit-backface-visibility:hidden;"; //anti-aliasing fix
			
			var border = "border:2px dotted " + vars.text + ";" +
						((vars.flat) ? 
							"box-shadow:0 0 0 3px " + color + ";" :
							"box-shadow:0 0 0 3px " + color + ",0 0 20px -3px rgba(0,0,0,.5);");
			
			//white shadow is part of the anti-alisaing fix
			var shadow = ((vars.flat) ? "text-shadow:0 0 0 " + vars.text + ";" : 
										"text-shadow:0 0 0 " + vars.text + ",0 0 5px rgba(0,0,0,.3);");
			
			return str + border + shadow;
		}
		
		//sets new ribbon style and code
		function set(){
			var style = ribbon(vars.color) + position[vars.position]();
			O("fork").setAttribute( 'style', style );
			
			$("#text").html( getText(style) );
		}
		
		//radio button change
		function setRadio(ev){
			vars[ev.target.name] = ev.target.value;
			set();
		}
		$("input[type=radio]").change(setRadio);
		
		function look(){
			if (this.checked) O("fork").classList.add(this.name);
			else O("fork").classList.remove(this.name);
		}
		
		//link text change
		$("input[name=link]").change(function(){
			vars.link = this.value;
			set();
		});
		
		//shadow flag change
		$("input[name=flat]").change(function(){
			vars.flat = this.checked;
			set();
		});	
		
		//color picker
		var cp = ColorPicker( O('slider'), O('picker'),
		function(hex, hsv, rgb) {
			vars.color = hex;
			$("input[name=hex]").val(hex);
			set();
		});
		//init color picker
		cp.setHex( vars.color );
		
		//manual hex change
		$("input[name=hex]").change(function(){
			cp.setHex(this.value);
		});
		
		//init ribbon
		set();
	</script>
</body>
</html>